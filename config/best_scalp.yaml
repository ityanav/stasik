instance_name: "SCALP"
initial_balance: 164235

bybit:
  testnet: false
  demo: true                       # use api-demo.bybit.com
  api_key: "Ct24OvPFimR3vLSlcW"
  api_secret: "CNzK2w9eQ41j4A4dszBLvvOkAH61Z5BQG9oq"

trading:
  pairs: ["BTCUSDT", "ETHUSDT", "XRPUSDT", "ADAUSDT", "AVAXUSDT", "LINKUSDT", "NEARUSDT", "SUIUSDT", "APTUSDT"]
  market_type: "futures"           # only futures (leverage + short)
  timeframe: "5"                   # 5 min — меньше шума чем 1м
  htf_timeframe: "60"              # higher timeframe for trend filter (1H)
  leverage: 10                     # 10x leverage
  trading_hours: [0, 24]           # 24/7 — крипта торгуется круглосуточно, развороты бывают в Азии

strategy:
  strategy_mode: "kotegawa"          # Стратегия Котегавы — mean reversion
  # SMA deviation (main signal)
  sma_period: 25                     # 25-SMA (как у Котегавы)
  sma_deviation_mild: 0.8            # 0.8% отклонение → score +-1 (было 1.5%, нереально на 5м мажорах)
  sma_deviation_extreme: 2.5         # 2.5% отклонение → score +-2 (было 5%)
  # RSI — ловим экстремумы
  rsi_period: 14
  rsi_overbought: 75                 # продажа при перегреве
  rsi_oversold: 25                   # покупка при панике
  rsi_extreme_low: 15                # экстремальная паника → +2
  rsi_extreme_high: 85               # экстремальная эйфория → -2
  # EMA для HTF
  ema_fast: 9
  ema_slow: 21
  # MACD (для AI аналитика)
  macd_fast: 12
  macd_slow: 26
  macd_signal: 9
  # Bollinger Bands
  bb_period: 20
  bb_std: 2.0
  # Volume
  vol_period: 20
  vol_threshold: 1.2                 # объём выше среднего = паника/FOMO
  # Scoring
  min_score: 3                       # 3 из 6 сигналов (не слишком агрессивно)
  adx_period: 14
  adx_min: 12
  fng_extreme_greed: 100             # отключён — Котегава продаёт при жадности
  fng_extreme_fear: 0                # отключён — Котегава покупает при страхе
  funding_rate_max: 999              # отключён — Котегава контр-тренд
  patterns_enabled: true
  orderbook_enabled: true
  market_bias: false                 # отключён — Котегава контр-тренд, bias мешает
  kotegawa_exit_ratio: 0.4           # выход на 40% пути от входа к SMA (ранняя фиксация, не жадничаем)

risk:
  risk_per_trade: 1.0              # 1% of balance per trade (было 1.5% — убытки слишком крупные)
  stop_loss: 1.0                   # 1% stop-loss
  take_profit: 2.0                 # 2% take-profit (2:1 ratio)
  max_open_positions: 8            # 8 позиций (x2 для Котегавы)
  max_daily_loss: 10.0             # 10% daily loss limit (was 15% — слишком много)
  trailing_stop: 0.5               # 0.5% trailing distance (двигается за ценой)
  trailing_activation: 1.5         # активация после 1.5% прибыли (было 0.3% — trailing срабатывал раньше partial close)
  partial_close_enabled: false       # отключён — Котегава ждёт полный возврат к SMA
  # ATR-based dynamic SL/TP
  atr_period: 14                   # период ATR
  atr_sl_multiplier: 2.0           # SL = 2.0 * ATR (было 1.5 — слишком тесно)
  atr_tp_multiplier: 4.0           # TP = 4.0 * ATR (R:R = 2:1)
  atr_trailing_multiplier: 1.5     # trailing distance = 1.5 * ATR (было 1.0)
  # ATR clamp — минимальные/максимальные %
  atr_sl_min: 0.7                  # мин SL 0.7% (было 0.5% — выбивает шумом)
  atr_sl_max: 3.0                  # макс SL 3%
  atr_tp_min: 2.0                  # мин TP 2% (было 1% → RR слишком низкий при зажатом ATR)
  atr_tp_max: 6.0                  # макс TP 6%
  atr_trail_min: 1.0               # мин trailing 1.0% (было 0.3% — резал прибыль на шуме)
  atr_trail_max: 2.0               # макс trailing 2%
  # Cooldown after loss
  cooldown_after_loss: 5           # минут кулдауна после стопа (было 2 — слишком быстро реентри)
  # Breakeven stop
  breakeven_activation: 0            # отключён — Котегава даёт позиции развиться
  smart_exit_min: 0                  # отключён — Котегава ждёт SMA, не мелкий профит
  # Correlation groups: max 1 position per group to avoid correlated losses
  max_per_group: 2                 # 2 позиции на группу (было 1)
  correlation_groups:
    majors: ["BTCUSDT", "ETHUSDT"]
    alt_l1: ["AVAXUSDT", "NEARUSDT", "SUIUSDT", "APTUSDT"]
    alt_infra: ["XRPUSDT", "ADAUSDT", "LINKUSDT"]

ai:
  enabled: true
  provider: "deepseek"
  api_key: "sk-2dec36c8752d48b6b2cfdedd21337126"
  model: "deepseek-chat"
  style: "kotegawa"                   # AI работает по стратегии Котегавы
  min_confidence: 4                  # умеренный фильтр — было 6, слишком строго (было 0 сделок)
  timeout: 10                        # таймаут запроса в секундах
  review_interval: 60                # ревью стратегии каждые 60 тиков (=60 мин при 1м TF)
  extra_timeframes: ["5", "15", "60"] # multi-TF context for AI analyst

dashboard:
  enabled: true
  port: 8080
  username: "ityanav"
  password_hash: "$2b$12$nkNYfoUba3r6SkwXealnduvAay.TzvkLvLNfBRxvICjfLxC.osU1e"
  secret: "f390917c31c0730992cef29d79739f023c15e555ed045b9cc5b5282298fa29eb"

other_instances:
  - name: "DEGEN"
    db_path: "/root/stasik/data/degen.db"
    service: "stasik-degen"
    timeframe: "5"
    leverage: "10x"
    exit_ratio: 0.65
    pairs: ["DOGEUSDT", "TRUMPUSDT", "WIFUSDT", "1000PEPEUSDT", "SHIB1000USDT", "1000BONKUSDT", "1000FLOKIUSDT", "FARTCOINUSDT", "PNUTUSDT", "ACTUSDT", "POPCATUSDT", "MEMEUSDT", "PENGUUSDT", "BRETTUSDT", "NOTUSDT", "GOATUSDT", "MOODENGUSDT", "VINEUSDT", "MELANIAUSDT", "VIRTUALUSDT"]
  - name: "TBANK-SCALP"
    db_path: "/root/stasik/data/tbank_scalp.db"
    service: "stasik-tbank-scalp"
    timeframe: "15м"
    leverage: "1x"
    pairs: ["SBER", "GAZP", "YDEX", "LKOH", "ROSN"]
  - name: "TBANK-SWING"
    db_path: "/root/stasik/data/tbank_swing.db"
    service: "stasik-tbank-swing"
    timeframe: "D"
    leverage: "1x"
    pairs: ["SBER", "GAZP", "LKOH"]

telegram:
  token: "7852966698:AAFA_L6ovqXtTmMO05DBZg3UYbx4DklIY7k"
  chat_id: "885025581"
