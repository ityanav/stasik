instance_name: "MIDAS"
exchange: "tbank"
initial_balance: 0

tbank:
  token: "t.Vk5L6-uEu1OMc2MkcSnA28LR390jDcg6sVVEsqP1HTOkc3K_FTOjy9qaj_H3mRtRIX3E5Nq254Ol7M13RATPIQ"
  sandbox: true
  account_id: ""
  commission_rate: 0.0004

database:
  path: "/root/stasik/data/midas.db"

trading:
  pairs: ["GLDRUB_TOM", "SLVRUB_TOM", "PLTRUB_TOM", "CNYRUB_TOM", "USD000UTSTOM", "KZTRUB_TOM"]
  instrument_type: "currency"
  market_type: "futures"
  timeframe: "5"                     # 5м — драгметаллы волатильнее акций
  htf_timeframe: "60"                # 1ч фильтр тренда
  leverage: 1
  trading_hours: [7, 16]             # 10:00-19:00 МСК = 07:00-16:00 UTC (торги MOEX)

strategy:
  strategy_mode: "trend"
  sma_period: 25
  sma_deviation_mild: 0.3            # 0.3% — драгметаллы: золото 0.12%/5м, серебро 0.29%/5м
  sma_deviation_extreme: 1.0         # 1.0% — extreme для scale-in (платина до 8%/день)
  rsi_period: 14
  rsi_oversold: 30
  rsi_overbought: 70
  rsi_extreme_low: 20
  rsi_extreme_high: 80
  ema_fast: 12
  ema_slow: 26
  macd_fast: 12
  macd_slow: 26
  macd_signal: 9
  bb_period: 20
  bb_std: 2.0
  vol_period: 20
  vol_threshold: 1.5                 # 1.5x средний объём
  min_score: 1                       # 1 сигнал — волатильность позволяет
  adx_period: 14
  adx_min: 16
  adx_max: 50                       # 50 — драгметаллы трендовее акций
  cvd_window: 5
  fng_extreme_greed: 100
  fng_extreme_fear: 0
  funding_rate_max: 999
  patterns_enabled: true
  orderbook_enabled: false
  htf_score_min: 3
  htf_min_sma_dev: 0.4              # HTF (1H) отклонение >= 0.4%
  reversal_confirmation: true
  reversal_candles: 1
  reversal_max_wait: 5               # 5 свечей = 25 мин на 5м TF
  scale_out_enabled: true
  scale_out_stages: [0.20, 0.40, 0.60]
  scale_out_sizes: [0.35, 0.35, 0.30]

risk:
  risk_per_trade: 2.0                # 2% баланса на сделку
  stop_loss: 1.5                     # фолбэк SL 1.5%
  take_profit: 3.0                   # фолбэк TP 3%
  max_open_positions: 4
  max_daily_loss: 0
  trailing_stop: 0.8
  trailing_activation: 0.8
  partial_close_enabled: false
  atr_period: 14
  atr_sl_multiplier: 1.25
  atr_tp_multiplier: 2.0
  atr_trailing_multiplier: 1.5
  atr_sl_min: 0.2
  atr_sl_max: 1.5
  atr_tp_min: 0.5
  atr_tp_max: 3.0
  atr_trail_min: 0.4
  atr_trail_max: 2.0
  cooldown_after_loss: 15            # 15 мин = 3 свечи на 5м
  breakeven_activation: 0
  commission_rate: 0.04              # TBank 0.04% per side
  min_tp_net: 100                    # TP >= 100 RUB чистой прибыли
  max_per_group: 1
  correlation_groups:
    metals: ["GLDRUB_TOM", "SLVRUB_TOM", "PLTRUB_TOM"]
    currencies: ["CNYRUB_TOM", "USD000UTSTOM", "KZTRUB_TOM"]

ai:
  enabled: true
  provider: "deepseek"
  api_key: "sk-2dec36c8752d48b6b2cfdedd21337126"
  model: "deepseek-chat"
  style: "aggressive"
  min_confidence: 6
  timeout: 15
  review_interval: 20
  extra_timeframes: ["60", "240", "D"]

other_instances:
  - name: "SCALP"
    db_path: "/root/stasik/data/trades.db"
    service: "stasik"
    timeframe: "5м"
    leverage: "1x"
    pairs: ["BTCUSDT", "ETHUSDT", "XRPUSDT", "ADAUSDT", "AVAXUSDT", "LINKUSDT", "NEARUSDT", "SUIUSDT", "APTUSDT"]
  - name: "TBANK-SCALP"
    db_path: "/root/stasik/data/tbank_scalp.db"
    service: "stasik-tbank-scalp"
    timeframe: "15м"
    leverage: "1x"
    pairs: ["SBER", "GAZP", "YDEX", "LKOH", "ROSN"]
  - name: "TBANK-SWING"
    db_path: "/root/stasik/data/tbank_swing.db"
    service: "stasik-tbank-swing"
    timeframe: "D"
    leverage: "1x"
    pairs: ["SBER", "GAZP", "LKOH"]

telegram:
  token: "7852966698:AAFA_L6ovqXtTmMO05DBZg3UYbx4DklIY7k"
  chat_id: "885025581"
  notify_only: true

dashboard:
  enabled: false
